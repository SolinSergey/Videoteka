"use strict";(self.webpackChunkmovie_app_front=self.webpackChunkmovie_app_front||[]).push([[853],{6853:function(e,t,a){a.r(t),a.d(t,{default:function(){return Ye}});var r=a(5671),i=a(3144),n=a(7326),s=a(136),l=a(7277),c="CatalogPage_catalog_container__Lzw5B",o="CatalogPage_empty__2DWMU",d="CatalogPage_genre_bar__XuT45",u="CatalogPage_selected__Od8ZQ",m="CatalogPage_unselected__S-XU+",h="CatalogPage_catalog__ODT+f",f="CatalogPage_pagination__sZ7Xm",g="CatalogPage_pagination_items__TGJH+",v="CatalogPage_filter_card__DHYp7",x="CatalogPage_filter_title__Dfl3q",p="CatalogPage_year_range__yJe2O",P="CatalogPage_field__gzLtI",_="CatalogPage_start__field__cGnBi",j="CatalogPage_separator__geNlW",S="CatalogPage_end__field__+wQ7g",C="CatalogPage_filter_btn__1EFs2",Z="CatalogPage_catalog_menu__M26af",N=a(2199),y=a(4518),b=a(7246),k=a(3239),L=a(8096),I=a(4812),w=a(4415),Y=a(3786),A=a(9439),F="FilmCard_container__uwPrU",D="FilmCard_card__iIPvb",M="FilmCard_poster__2HgS1",z="FilmCard_details__iYCfw",R="FilmCard_rating__7QE-u",G=a(4637),O="TagButton_genre__ebOm7",E="TagButton_genre_item__hwQqH",T=a(184);var B=function(e){return(0,T.jsx)("div",{className:O,children:(0,T.jsx)("div",{className:E,children:(0,T.jsx)("span",{children:e.genre})})})},H=a(2791),U=a(8283),J=a(4165),W=a(5861),Q=(a(5462),a(7462)),V=a(3366),X=a(8182),q=a(4419),K=a(6934),$=a(1402),ee=a(4036),te=a(5878),ae=a(1217);function re(e){return(0,ae.Z)("MuiIcon",e)}(0,te.Z)("MuiIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var ie=["baseClassName","className","color","component","fontSize"],ne=(0,K.ZP)("span",{name:"MuiIcon",slot:"Root",overridesResolver:function(e,t){var a=e.ownerState;return[t.root,"inherit"!==a.color&&t["color".concat((0,ee.Z)(a.color))],t["fontSize".concat((0,ee.Z)(a.fontSize))]]}})((function(e){var t=e.theme,a=e.ownerState;return{userSelect:"none",width:"1em",height:"1em",overflow:"hidden",display:"inline-block",textAlign:"center",flexShrink:0,fontSize:{inherit:"inherit",small:t.typography.pxToRem(20),medium:t.typography.pxToRem(24),large:t.typography.pxToRem(36)}[a.fontSize],color:{primary:(t.vars||t).palette.primary.main,secondary:(t.vars||t).palette.secondary.main,info:(t.vars||t).palette.info.main,success:(t.vars||t).palette.success.main,warning:(t.vars||t).palette.warning.main,action:(t.vars||t).palette.action.active,error:(t.vars||t).palette.error.main,disabled:(t.vars||t).palette.action.disabled,inherit:void 0}[a.color]}})),se=H.forwardRef((function(e,t){var a=(0,$.Z)({props:e,name:"MuiIcon"}),r=a.baseClassName,i=void 0===r?"material-icons":r,n=a.className,s=a.color,l=void 0===s?"inherit":s,c=a.component,o=void 0===c?"span":c,d=a.fontSize,u=void 0===d?"medium":d,m=(0,V.Z)(a,ie),h=(0,Q.Z)({},a,{baseClassName:i,color:l,component:o,fontSize:u}),f=function(e){var t=e.color,a=e.fontSize,r=e.classes,i={root:["root","inherit"!==t&&"color".concat((0,ee.Z)(t)),"fontSize".concat((0,ee.Z)(a))]};return(0,q.Z)(i,re,r)}(h);return(0,T.jsx)(ne,(0,Q.Z)({as:o,className:(0,X.Z)(i,"notranslate",f.root,n),ownerState:h,"aria-hidden":!0,ref:t},m))}));se.muiName="Icon";var le=se,ce=a(7205),oe=a(1243),de=a(5985);var ue=function(e){var t=function(e){de.Am.success(e,{toastId:"s1"})},a=JSON.parse(localStorage.getItem("role_user")),r=function(){var a=(0,W.Z)((0,J.Z)().mark((function a(r,i){var n,s;return(0,J.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=e.cover,!localStorage.getItem("customer")){a.next=16;break}return a.prev=2,a.next=5,oe.Z.get("http://localhost:5555/cart/api/v1/cart/add",{params:{uuid:localStorage.getItem("guestCartId"),filmId:e.filmId,filmTitle:e.title,rentPrice:e.rentPrice,salePrice:e.salePrice,filmImageUrlLink:n,isSale:i}}).then((function(e){t(e.data.value)}),(function(e){console.log(e);var t;t=e.response.data.value,de.Am.error(t,{toastId:"e1"})}));case 5:s=a.sent,t(s.data.value),console.log("\u041e\u0442\u0432\u0435\u0442 \u043c\u0435\u0442\u043e\u0434\u0430 addToCart: ",s.data),a.next=14;break;case 10:a.prev=10,a.t0=a.catch(2),function(e){de.Am.error(e,{toastId:"e2"})}(a.t0);case 14:a.next=17;break;case 16:t("\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443 \u0438 \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0442\u043e\u043b\u044c\u043a\u043e \u0434\u043b\u044f \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d\u043d\u044b\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439! \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0443\u0439\u0442\u0435\u0441\u044c!");case 17:case"end":return a.stop()}}),a,null,[[2,10]])})));return function(e,t){return a.apply(this,arguments)}}(),i=function(t){switch(t){case"reviews":case"add_review":e.setCommand(t);break;default:return null}};return(0,T.jsx)("div",{className:"film-page",children:(0,T.jsxs)("div",{className:"movie",children:[(0,T.jsx)("div",{className:"movie__hero",children:(0,T.jsx)("img",{src:e.cover,alt:e.title,className:"movie__img"})}),(0,T.jsxs)("div",{className:"movie__content",children:[(0,T.jsx)("div",{className:"movie__title",children:(0,T.jsxs)("h1",{className:"heading__primary",children:[e.title,(0,T.jsx)("i",{className:"fas fa-fire"})]})}),(0,T.jsx)("div",{className:"movie__genre",children:e.genre.map((function(e){return(0,T.jsxs)("div",{className:"movie__tag movie__tag--1",children:["#",e]})}))}),(0,T.jsx)("p",{className:"movie__description",children:e.description}),(0,T.jsx)("div",{}),(0,T.jsxs)("div",{className:"movie__details",children:[(0,T.jsx)("h4",{children:"\u0420\u0435\u0436\u0438\u0441\u0441\u0451\u0440: "}),e.director.map((function(e){return(0,T.jsxs)("p",{className:"movie__detail",children:[(0,T.jsx)("span",{className:"icons icons-red"}),e]})})),(0,T.jsxs)("p",{className:"movie__detail",children:[(0,T.jsxs)("span",{className:"icons icons-grey",children:[(0,T.jsx)("i",{className:"fas fa-clock"})," "]}),e.premierYear]}),e.country.map((function(e){return(0,T.jsxs)("p",{className:"movie__detail",children:[(0,T.jsxs)("span",{className:"icons icons-grey",children:[(0,T.jsx)("i",{className:"fas fa-clock"})," "]}),e]})}))]}),(0,T.jsxs)("div",{className:"reviews_link",children:[(0,T.jsx)("button",{onClick:function(){return i("reviews")},children:(0,T.jsx)("span",{className:"to_reviews",children:(0,T.jsx)("h4",{children:"\u041e\u0442\u0437\u044b\u0432\u044b \u043d\u0430 \u0444\u0438\u043b\u044c\u043c"})})}),"ROLE_USER"===a?(0,T.jsx)("button",{onClick:function(){return i("add_review")},children:(0,T.jsx)("span",{className:"to_reviews",children:(0,T.jsx)("h4",{children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0440\u0435\u0446\u0435\u043d\u0437\u0438\u044e"})})}):null]}),(0,T.jsxs)("p",{className:"movie__detail",children:[(0,T.jsx)("span",{className:"icons icons-yellow",children:(0,T.jsx)("i",{className:"fas fa-file-invoice-dollar"})}),"ROLE_USER"===a?(0,T.jsxs)("div",{className:"btn_box",children:[(0,T.jsx)("h5",{children:"\u041a\u0443\u043f\u0438\u0442\u044c"}),(0,T.jsx)("button",{className:"sale",onClick:function(e,t){r(e,!0)},children:e.salePrice}),(0,T.jsx)("h5",{children:"\u0410\u0440\u0435\u043d\u0434\u0430"}),(0,T.jsx)("button",{className:"pay_btn",onClick:function(e,t){r(e,!1)},children:e.rentPrice})]}):null]})]}),(0,T.jsxs)("div",{className:"movie__price",children:["\u0426\u0435\u043d\u0430 \u043f\u0440\u043e\u0434\u0430\u0436\u0438: ",e.salePrice,(0,T.jsx)(le,{sx:{transform:"rotate(90deg)"},component:ce.Z})," / \u0426\u0435\u043d\u0430 \u0430\u0440\u0435\u043d\u0434\u044b: ",e.rentPrice,(0,T.jsx)(le,{sx:{transform:"rotate(90deg)"},component:ce.Z})]})]})})},me=a(493),he=a(5021),fe=a(6199);function ge(e){return(0,ae.Z)("MuiListItemAvatar",e)}(0,te.Z)("MuiListItemAvatar",["root","alignItemsFlexStart"]);var ve=["className"],xe=(0,K.ZP)("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:function(e,t){var a=e.ownerState;return[t.root,"flex-start"===a.alignItems&&t.alignItemsFlexStart]}})((function(e){var t=e.ownerState;return(0,Q.Z)({minWidth:56,flexShrink:0},"flex-start"===t.alignItems&&{marginTop:8})})),pe=H.forwardRef((function(e,t){var a=(0,$.Z)({props:e,name:"MuiListItemAvatar"}),r=a.className,i=(0,V.Z)(a,ve),n=H.useContext(fe.Z),s=(0,Q.Z)({},a,{alignItems:n.alignItems}),l=function(e){var t=e.alignItems,a=e.classes,r={root:["root","flex-start"===t&&"alignItemsFlexStart"]};return(0,q.Z)(r,ge,a)}(s);return(0,T.jsx)(xe,(0,Q.Z)({className:(0,X.Z)(l.root,r),ownerState:s,ref:t},i))})),Pe=a(3044),_e=a(9900),je=a(890),Se=a(4721);var Ce=function(e){var t=JSON.parse(localStorage.getItem("role_user")),a=function(){var t=(0,W.Z)((0,J.Z)().mark((function t(){return(0,J.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,oe.Z.get("http://localhost:5555/catalog/api/v1/rating/all_grade_and_review_by_filmId",{params:{filmId:e.filmId}}).then((function(e){return o(e.data)}),(function(e){console.log(e);var t;t=e.response.data.value,de.Am.error(t)}));case 3:return t.abrupt("return",t.sent);case 6:t.prev=6,t.t0=t.catch(0);case 8:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(){return t.apply(this,arguments)}}(),r=function(t){switch(t){case"":case"add_review":e.setCommand(t);break;default:return null}};(0,H.useEffect)((function(){a()}),[]);var i=(0,H.useState)(""),n=(0,A.Z)(i,2),s=(n[0],n[1],(0,H.useState)([])),l=(0,A.Z)(s,2),c=l[0],o=l[1];return(0,T.jsxs)("div",{className:"review-page",children:[c.length>0?(0,T.jsxs)(me.Z,{sx:{width:"100%",maxWidth:360,bgcolor:"background.paper"},children:[c.map((function(t){return(0,T.jsxs)(he.ZP,{alignItems:"flex-start",children:[(0,T.jsx)(pe,{children:(0,T.jsx)(Pe.Z,{alt:"Remy Sharp",src:"https://mui.com/static/images/avatar/3.jpg"})}),(0,T.jsx)(_e.Z,{primary:e.title,secondary:(0,T.jsxs)(H.Fragment,{children:[(0,T.jsx)(je.Z,{sx:{display:"inline"},component:"span",variant:"subtitle2",color:"text.primary"}),(0,T.jsx)(Se.Z,{variant:"inset",component:"li"}),(0,T.jsx)("span",{children:t.review})]})})]})})),(0,T.jsx)(Se.Z,{variant:"inset",component:"li"})]}):(0,T.jsxs)("div",{className:"review_empty__sheet",children:[(0,T.jsx)("p",{children:"\u0423 \u044d\u0442\u043e\u0433\u043e \u0444\u0438\u043b\u044c\u043c\u0430 \u0435\u0449\u0451 \u043d\u0435\u0442 \u0440\u0435\u0446\u0435\u043d\u0437\u0438\u0439."}),(0,T.jsx)(Se.Z,{variant:"middle"}),"\u0421\u0442\u0430\u043d\u044c\u0442\u0435 \u043f\u0435\u0440\u0432\u044b\u043c \u0440\u0435\u0446\u0435\u043d\u0437\u0435\u043d\u0442\u043e\u043c!"]}),(0,T.jsxs)("div",{className:"review-page__btn_group",children:[(0,T.jsx)("div",{className:"button-back_box",children:(0,T.jsx)("button",{onClick:function(){return r("")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043a \u0444\u0438\u043b\u044c\u043c\u0443"})}),"ROLE_USER"===t?(0,T.jsx)("div",{className:"button-back_box",children:(0,T.jsx)("button",{onClick:function(){return r("add_review")},children:"\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u043e\u0442\u0437\u044b\u0432"})}):null]})]})},Ze=a(5527),Ne=a(9514),ye=a(7113);var be=function(e){var t=function(e){de.Am.success(e)},a=function(t){switch(t){case"reviews":case"":e.setCommand(t);break;default:return null}},r=function(){try{oe.Z.get("http://localhost:5555/catalog/api/v1/rating/grade_user_by_id_film",{params:{filmId:e.filmId}}).then((function(e){return e.data})).then((function(e){g(!0),console.log(e),u(e.grade)}))}catch(t){}};r();var i=(0,H.useState)(""),n=(0,A.Z)(i,2),s=n[0],l=n[1],c=(0,H.useState)(0),o=(0,A.Z)(c,2),d=o[0],u=o[1],m=(0,H.useState)(!1),h=(0,A.Z)(m,2),f=h[0],g=h[1],v=(0,H.useState)(0),x=(0,A.Z)(v,2),p=x[0],P=x[1],_=(0,H.useState)(""),j=(0,A.Z)(_,2);j[0],j[1];var S=(0,H.useRef)();return(0,T.jsxs)("div",{className:"add-review__container",children:[(0,T.jsx)(Ze.Z,{elevation:3,sx:{margin:3,display:"flex",alignItems:"center"},children:(0,T.jsxs)("div",{children:[f?(0,T.jsx)(G.Z,{name:"read-only",value:d,emptyIcon:(0,T.jsx)(ye.Z,{style:{opacity:.55,color:"black"},fontSize:"inherit"}),readOnly:!0}):(0,T.jsx)(G.Z,{name:"simple-controlled",emptyIcon:(0,T.jsx)(ye.Z,{style:{opacity:.55,color:"black"},fontSize:"inherit"}),onChange:function(e){return function(e){console.log(e.target.value),P(e.target.value)}(e)}}),(0,T.jsxs)("div",{className:"review__container_textarea",children:[(0,T.jsx)("textarea",{ref:S,name:"review",cols:"40",rows:"5",onChange:function(e){return function(e){console.log(e.target.value),l(e.target.value)}(e)}}),(0,T.jsx)("label",{children:"\u041f\u0438\u0448\u0438\u0442\u0435 \u043e\u0442\u0437\u044b\u0432 \u0437\u0434\u0435\u0441\u044c!"})]}),(0,T.jsx)("button",{className:"add-review__container__send_btn",onClick:function(){!function(a){var i=JSON.parse(localStorage.getItem("userId"));console.log(s);try{""!==s&&oe.Z.post("http://localhost:5555/catalog/api/v1/rating/new_comment",{film_id:e.filmId,user_id:Number(i),grade:p,review:s}).then((function(e){return t(e.data.message)})).then((function(){t("\u0412\u0430\u0448 \u043e\u0442\u0437\u044b\u0432 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d \u043d\u0430 \u043c\u043e\u0434\u0435\u0440\u0430\u0446\u0438\u044e!"),r()}))}catch(n){}}()},children:(0,T.jsx)(Ne.Z,{})})]})}),(0,T.jsxs)("div",{className:"add-review__container__btn-group",children:[(0,T.jsx)("div",{className:"button-back_box",children:(0,T.jsx)("button",{type:"submit",onClick:function(){return a("")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043a \u0444\u0438\u043b\u044c\u043c\u0443"})}),(0,T.jsx)("div",{className:"button-back_box",children:(0,T.jsx)("button",{onClick:function(){return a("reviews")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043a \u043e\u0442\u0437\u044b\u0432\u0430\u043c"})})]}),(0,T.jsx)(de.Ix,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"dark"})]})};var ke=function(e){var t=(0,H.useState)(""),a=(0,A.Z)(t,2),r=a[0],i=a[1];console.log("Id \u0444\u0438\u043b\u044c\u043c\u0430: "+e.id),console.log(),function(){try{oe.Z.get("http://localhost:5555/catalog/api/v1/rating/total_film_rating",{params:{filmId:e.id}}).then((function(e){return e.data})).then((function(e){i(e)}))}catch(t){}}();var n=(0,H.useState)(""),s=(0,A.Z)(n,2),l=s[0],c=s[1],o=(0,H.useState)(!1),d=(0,A.Z)(o,2),u=d[0],m=d[1];return(0,T.jsxs)("div",{className:F,children:[(0,T.jsxs)("div",{className:D,onClick:function(){return m(!0)},children:[(0,T.jsx)("div",{className:M,children:(0,T.jsx)("img",{src:e.imageUrlLink,alt:""})}),(0,T.jsxs)("div",{className:z,children:[(0,T.jsxs)("h2",{children:[e.title,(0,T.jsx)("br",{}),e.director.map((function(e){return(0,T.jsxs)("span",{children:["\u0420\u0435\u0436\u0438\u0441\u0451\u0440: ",e]})}))]}),(0,T.jsxs)("div",{className:R,children:[(0,T.jsx)(G.Z,{name:"half-rating-read",sx:{padding:1},size:"normal",precision:.01,value:r,readOnly:!0}),(0,T.jsx)("span",{children:r})]}),e.genre.map((function(e){return(0,T.jsx)(B,{genre:e})}))]}),(0,T.jsx)("div",{className:"card-footer",children:(0,T.jsx)("div",{className:"clearfix"})})]}),(0,T.jsx)(U.Z,{setCommand:c,active:u,setActive:m,children:function(t){switch(t){case"reviews":return(0,T.jsx)(Ce,{filmId:e.id,title:e.title,setCommand:c});case"add_review":return(0,T.jsx)(be,{filmId:e.id,setCommand:c});default:return(0,T.jsx)(ue,{director:e.director,filmId:e.id,ratingValue:r,isSale:e.isSale,title:e.title,premierYear:e.premierYear,country:e.country,description:e.description,genre:e.genre,rentPrice:e.rentPrice,salePrice:e.salePrice,cover:e.imageUrlLink,setCommand:c})}}(l)})]})},Le=a(5403),Ie=a(7394);var we=function(e){function t(){e.getFilmByTitlePart(i)}var a=(0,H.useState)(""),r=(0,A.Z)(a,2),i=r[0],n=r[1],s=(0,H.useState)(!1),l=(0,A.Z)(s,2),c=l[0],o=l[1],d=(0,H.useRef)();return(0,T.jsx)("div",{className:"search_container",children:(0,T.jsx)("div",{className:"box",children:(0,T.jsxs)("div",{className:"container-1",children:[(0,T.jsx)("input",{type:"text",id:"search",placeholder:"\u041f\u043e\u0438\u0441\u043a...",ref:d,onChange:function(e){return function(e){console.log(e.target.value),n(e.target.value),o(!0)}(e)},onKeyDown:function(e){"Enter"===e.key&&(console.log("\u041a\u043b\u0430\u0432\u0438\u0448\u0430 \u043d\u0430\u0436\u0430\u0442\u0430"),t())}}),c?(0,T.jsx)("button",{className:"back_btn",onClick:function(){return d.current.value="",e.getFilmByTitlePart(""),void o(!1)},children:(0,T.jsx)(Ie.Z,{})}):null,(0,T.jsx)("span",{className:"icon",children:(0,T.jsx)("button",{onClick:function(){return t()},className:"fa fa-search",children:(0,T.jsx)(Le.Z,{})})})]})})})},Ye=(a(2703),function(e){(0,s.Z)(a,e);var t=(0,l.Z)(a);function a(e){var i;return(0,r.Z)(this,a),(i=t.call(this,e)).getCurrentUser=function(){return JSON.parse(localStorage.getItem("customer"))},i.searchHandler=function(){i.setState({films:i.props.films,totalPages:i.props.totalPages,totalElements:i.props.totalElements,currentPage:i.props.currentPage})},i.getMinMaxPrice=function(){oe.Z.get("http://localhost:5555/catalog/api/v1/price/prices_filter").then((function(e){return e.data})).then((function(e){!0===i.state.isSale?(console.log(e.minPriceSale),i.setState({minPrice:e.minPriceSale,maxPrice:e.maxPriceSale,minPlaceholderPrice:e.minPriceSale,maxPlaceholderPrice:e.maxPriceSale},(function(){return i.getAllFilms(i.state.currentPage,i.state.filterCountryList,i.state.filterDirectorList,i.state.filterGenreList,i.state.startPremierYear,i.state.endPremierYear,i.state.isSale,i.state.minPrice,i.state.maxPrice)}))):!1===i.state.isSale&&(console.log(e),i.setState({minPrice:e.minPriceRent,maxPrice:e.maxPriceRent,minPlaceholderPrice:e.minPriceRent,maxPlaceholderPrice:e.maxPriceRent},(function(){return i.getAllFilms(i.state.currentPage,i.state.filterCountryList,i.state.filterDirectorList,i.state.filterGenreList,i.state.startPremierYear,i.state.endPremierYear,i.state.isSale,i.state.minPrice,i.state.maxPrice)})))})).catch((function(e){console.error("Error: "+e)}))},i.getMinMaxYear=function(){oe.Z.get("http://localhost:5555/catalog/api/v1/film/min_max_year").then((function(e){return e.data})).then((function(e){console.log(e.minYear),i.setState({startPremierYear:e.minYear,endPremierYear:e.maxYear,startPlaceholderYear:e.minYear,endPlaceholderYear:e.maxYear})})).catch((function(e){console.error("Error: "+e)}))},i.getAllGenres=function(){oe.Z.get("http://localhost:5555/catalog/api/v1/genre/all").then((function(e){return e.data})).then((function(e){console.log(e),i.setState({genres:e})})).catch((function(e){console.error("Error: "+e)}))},i.getAllDirectors=function(){oe.Z.get("http://localhost:5555/catalog/api/v1/director/all").then((function(e){return e.data})).then((function(e){console.log(e),i.setState({directors:e})})).catch((function(e){console.error("Error: "+e)}))},i.getAllCountries=function(){oe.Z.get("http://localhost:5555/catalog/api/v1/country/all").then((function(e){return e.data})).then((function(e){console.log(e),i.setState({countries:e})})).catch((function(e){console.error("Error: "+e)}))},i.getAllFilms=function(e,t,a,r,n,s,l,c,o,d){e-=1,oe.Z.get("http://localhost:5555/catalog/api/v1/film/all_with_filter/",{headers:{"Content-Type":"application/x-www-form-urlencoded"},params:{currentPage:e,filterCountryList:t,filterDirectorList:a,filterGenreList:r,startPremierYear:n,endPremierYear:s,isSale:l,minPrice:c,maxPrice:o,findString:d}}).then((function(e){return e.data})).then((function(e){i.setState({films:e.content,totalPages:e.totalPages,totalElements:e.totalElements,currentPage:e.number+1})}),(function(e){console.log(e);var t;t=e.response.data.value,de.Am.error(t)})).catch((function(e){console.error("Error: "+e)}))},i.getFilmByTitlePart=function(e){console.log(e),i.setState({findString:e},(function(){return i.getAllFilms(i.state.currentPage,i.state.filterCountryList,i.state.filterDirectorList,i.state.filterGenreList,i.state.startPremierYear,i.state.endPremierYear,i.state.isSale,i.state.minPrice,i.state.maxPrice,i.state.findString)}))},i.handleDirectorsChange=i.handleDirectorsChange.bind((0,n.Z)(i)),i.handleCountriesChange=i.handleCountriesChange.bind((0,n.Z)(i)),i.handleSaleSet=i.handleSaleSet.bind((0,n.Z)(i)),i.handleRentSet=i.handleRentSet.bind((0,n.Z)(i)),i.state={films:[],genres:[],directors:[],countries:[],filterCountryList:"",filterDirectorList:"",filterGenreList:"",startPremierYear:"",endPremierYear:"",minYear:"",maxYear:"",startPlaceholderYear:"",endPlaceholderYear:"",titlePart:"",isSale:!0,minPrice:"",maxPrice:"",findString:"",currentPage:1,active:!1,modal:!1,minPlaceholderPrice:"",maxPlaceholderPrice:""},i}return(0,i.Z)(a,[{key:"componentDidMount",value:function(){this.searchHandler(),this.getMinMaxPrice(),this.getMinMaxYear(),this.getAllGenres(),this.getAllDirectors(),this.getAllCountries();this.getCurrentUser()}},{key:"clearState",value:function(){var e=this;this.setState({filterCountryList:"",filterDirectorList:"",filterGenreList:"",startPremierYear:"",endPremierYear:"",isSale:!0,minPrice:"",maxPrice:"",findString:"",currentPage:1,active:!1},(function(){e.getMinMaxPrice(),e.getMinMaxYear()}))}},{key:"filmFilterByGenres",value:function(e){var t=this;"\u0412\u0441\u0435"===e?this.clearState():this.setState({filterGenreList:e},(function(){return t.getAllFilms(t.state.currentPage,t.state.filterCountryList,t.state.filterDirectorList,t.state.filterGenreList,t.state.startPremierYear,t.state.endPremierYear,t.state.isSale,t.state.minPrice,t.state.maxPrice,t.state.findString)}))}},{key:"handleDirectorsChange",value:function(e){var t=this;console.log(e.target.value),"\u0412\u0441\u0435"===e.target.value?this.clearState():"\u0412\u0441\u0435"!==e.target.value&&this.setState({filterDirectorList:e.target.value},(function(){return t.getAllFilms(t.state.currentPage,t.state.filterCountryList,t.state.filterDirectorList,t.state.filterGenreList,t.state.startPremierYear,t.state.endPremierYear,t.state.isSale,t.state.minPrice,t.state.maxPrice,t.state.findString)}))}},{key:"usePageHandler",value:function(e){var t=this;console.log(e),this.setState({currentPage:e},(function(){return t.getAllFilms(t.state.currentPage,t.state.filterCountryList,t.state.filterDirectorList,t.state.filterGenreList,t.state.startPremierYear,t.state.endPremierYear,t.state.isSale,t.state.minPrice,t.state.maxPrice,t.state.findString)}))}},{key:"handleCountriesChange",value:function(e){var t=this;this.setState({filterCountryList:e.target.value},(function(){return t.getAllFilms(t.state.currentPage,t.state.filterCountryList,t.state.filterDirectorList,t.state.filterGenreList,t.state.startPremierYear,t.state.endPremierYear,t.state.isSale,t.state.minPrice,t.state.maxPrice,t.state.findString)}))}},{key:"handleDateChange",value:function(e,t){var a=this,r=t.target.value;"second"===e?parseInt(this.state.startPlaceholderYear)<=parseInt(r)&&4===r.length&&this.setState({endPremierYear:r},(function(){return a.getAllFilms(a.state.currentPage,a.state.filterCountryList,a.state.filterDirectorList,a.state.filterGenreList,a.state.startPremierYear,a.state.endPremierYear,a.state.isSale,a.state.minPrice,a.state.maxPrice,a.state.findString)})):parseInt(r)<=parseInt(this.state.endPlaceholderYear)&&4===r.length&&this.setState({startPremierYear:r},(function(){return a.getAllFilms(a.state.currentPage,a.state.filterCountryList,a.state.filterDirectorList,a.state.filterGenreList,a.state.startPremierYear,a.state.endPremierYear,a.state.isSale,a.state.minPrice,a.state.maxPrice,a.state.findString)}))}},{key:"handleSaleSet",value:function(){var e=this;this.setState({isSale:!0},(function(){return e.getMinMaxPrice()}))}},{key:"handleRentSet",value:function(){var e=this;this.setState({isSale:!1},(function(){return e.getMinMaxPrice()}))}},{key:"handlePriceChange",value:function(e,t){var a=this,r=t.target.value;"second"===e?parseInt(this.state.minPlaceholderPrice)<=parseInt(r)&&this.setState({maxPrice:r},(function(){return a.getAllFilms(a.state.currentPage,a.state.filterCountryList,a.state.filterDirectorList,a.state.filterGenreList,a.state.startPremierYear,a.state.endPremierYear,a.state.isSale,a.state.minPrice,a.state.maxPrice,a.state.findString)})):parseInt(r)<=parseInt(this.state.maxPlaceholderPrice)&&parseInt(r)>=parseInt(this.state.minPlaceholderPrice)&&this.setState({minPrice:r},(function(){return a.getAllFilms(a.state.currentPage,a.state.filterCountryList,a.state.filterDirectorList,a.state.filterGenreList,a.state.startPremierYear,a.state.endPremierYear,a.state.isSale,a.state.minPrice,a.state.maxPrice,a.state.findString)}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.films,r=t.currentPage,i=(t.filmsPerPage,this.state.genres),n=this.state.directors,s=this.state.countries,l=this.state.totalPages,A=this.state.active,F=A.active;A.setActive,JSON.parse(localStorage.getItem("role_user"));return(0,T.jsxs)("div",{className:c,children:[(0,T.jsx)("div",{className:d,children:(0,T.jsxs)(N.Z,{variant:"text",size:"small","aria-label":"outlined primary button group",children:[(0,T.jsx)(y.Z,{onClick:function(){return e.filmFilterByGenres("\u0412\u0441\u0435")},className:m,children:"\u0412\u0441\u0435"}),i.map((function(t){return(0,T.jsx)(y.Z,{onClick:function(){return e.filmFilterByGenres(t.title)},className:F?u:m,children:t.title})}))]})}),(0,T.jsx)(we,{getFilmByTitlePart:function(t){return e.getFilmByTitlePart(t)}}),(0,T.jsx)("div",{className:f,children:a.length>0?(0,T.jsx)("div",{className:Z,children:(0,T.jsx)("div",{className:g,children:(0,T.jsx)(b.Z,{count:l,page:r,color:"success",siblingCount:1,sx:{backgroundColor:"#414141"},onChange:function(t,a){return e.usePageHandler(a)}})})}):(0,T.jsx)("div",{className:o})}),(0,T.jsx)("div",{className:h,children:0===a.length?(0,T.jsx)("div",{className:o,children:(0,T.jsx)(k.Z,{color:"secondary",sx:{mt:25,ml:70}})}):a.map((function(t){return(0,T.jsx)(ke,{imageUrlLink:t.imageUrlLink,id:t.id,isSale:e.state.isSale,salePrice:t.salePrice,rentPrice:t.rentPrice,title:t.title,premierYear:t.premierYear,country:t.country,genre:t.genre,director:t.director,description:t.description})}))}),(0,T.jsxs)("div",{className:v,children:[(0,T.jsxs)(L.Z,{sx:{m:1,minWidth:120},size:"small",focused:!1,children:[(0,T.jsx)(I.Z,{id:"demo-select-small-label",children:"\u0420\u0435\u0436\u0438\u0441\u0441\u0451\u0440"}),(0,T.jsxs)(w.Z,{labelId:"demo-select-small-label",id:"demo-select-small",name:"director",value:this.state.filterDirectorList,color:"success",defaultValue:"",sx:{backgroundColor:"darkgrey",borderColor:"success"},label:"Age",onChange:this.handleDirectorsChange,children:[(0,T.jsx)(Y.Z,{value:"\u0412\u0441\u0435",children:(0,T.jsx)("em",{children:"\u0412\u0441\u0435"})}),n.map((function(e){return(0,T.jsxs)(Y.Z,{value:e.firstName+" "+e.lastName,children:[e.firstName," ",e.lastName]})}))]})]}),(0,T.jsx)("div",{children:(0,T.jsxs)(L.Z,{sx:{m:1,minWidth:120},size:"small",children:[(0,T.jsx)(I.Z,{id:"demo-select-small-label",children:"\u0421\u0442\u0440\u0430\u043d\u0430"}),(0,T.jsxs)(w.Z,{labelId:"country",id:"demo-select-small",name:"country",value:this.state.filterCountryList,color:"success",defaultValue:"\u0412\u0441\u0435",sx:{backgroundColor:"darkgrey",borderColor:"success"},label:"\u0421\u0442\u0440\u0430\u043d\u0430",onChange:this.handleCountriesChange,children:[(0,T.jsx)(Y.Z,{value:"",onClick:this.handleClear,children:(0,T.jsx)("em",{children:"\u0412\u0441\u0435"})}),s.map((function(e){return(0,T.jsx)(Y.Z,{value:e.title,children:e.title})}))]})]})}),(0,T.jsx)("br",{}),(0,T.jsx)("span",{className:x,children:"\u0413\u043e\u0434\u044b \u043f\u0440\u0435\u043c\u044c\u0435\u0440"}),(0,T.jsx)("div",{children:(0,T.jsxs)("div",{className:p,children:[(0,T.jsx)("div",{className:P,children:(0,T.jsx)("input",{type:"number",className:_,placeholder:this.state.startPlaceholderYear,onChange:this.handleDateChange.bind(this,"first")})}),(0,T.jsx)("div",{className:j,children:(0,T.jsx)("span",{children:"-"})}),(0,T.jsx)("div",{className:P,children:(0,T.jsx)("input",{type:"number",className:S,placeholder:this.state.endPlaceholderYear,onChange:this.handleDateChange.bind(this,"second")})})]})}),(0,T.jsx)("br",{}),this.state.isSale?(0,T.jsx)("span",{className:x,children:"\u0414\u0438\u0430\u043f\u0430\u0437\u043e\u043d \u0446\u0435\u043d \u043f\u0440\u043e\u0434\u0430\u0436\u0438"}):(0,T.jsx)("span",{className:x,children:"\u0414\u0438\u0430\u043f\u0430\u0437\u043e\u043d \u0446\u0435\u043d \u0430\u0440\u0435\u043d\u0434\u044b"}),(0,T.jsx)("div",{children:(0,T.jsxs)("div",{className:p,children:[(0,T.jsx)("div",{className:P,children:(0,T.jsx)("input",{type:"number",className:_,placeholder:this.state.minPlaceholderPrice,onChange:this.handlePriceChange.bind(this,"first")})}),(0,T.jsx)("div",{className:j,children:(0,T.jsx)("span",{children:"-"})}),(0,T.jsx)("div",{className:P,children:(0,T.jsx)("input",{type:"number",className:S,placeholder:this.state.maxPlaceholderPrice,onChange:this.handlePriceChange.bind(this,"second")})})]})}),this.state.isSale?(0,T.jsx)(y.Z,{onClick:this.handleRentSet,className:C,children:"\u0410\u0440\u0435\u043d\u0434\u0430"}):(0,T.jsx)(y.Z,{onClick:this.handleSaleSet,className:C,children:"\u041f\u0440\u043e\u0434\u0430\u0436\u0430"}),(0,T.jsx)(y.Z,{onClick:function(){return e.filmFilterByGenres("\u0412\u0441\u0435")},className:C,children:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c"})]}),(0,T.jsx)(de.Ix,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"dark"})]})}}]),a}(H.Component))},7205:function(e,t,a){var r=a(4836);t.Z=void 0;var i=r(a(5649)),n=a(184),s=(0,i.default)((0,n.jsx)("path",{d:"M13.5 3H7v9H5v2h2v2H5v2h2v3h2v-3h4v-2H9v-2h4.5c3.04 0 5.5-2.46 5.5-5.5S16.54 3 13.5 3zm0 9H9V5h4.5C15.43 5 17 6.57 17 8.5S15.43 12 13.5 12z"}),"CurrencyRuble");t.Z=s},5403:function(e,t,a){var r=a(4836);t.Z=void 0;var i=r(a(5649)),n=a(184),s=(0,i.default)((0,n.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search");t.Z=s},9514:function(e,t,a){var r=a(4836);t.Z=void 0;var i=r(a(5649)),n=a(184),s=(0,i.default)((0,n.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send");t.Z=s},7113:function(e,t,a){var r=a(4836);t.Z=void 0;var i=r(a(5649)),n=a(184),s=(0,i.default)((0,n.jsx)("path",{d:"m22 9.24-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"}),"StarBorderOutlined");t.Z=s}}]);
//# sourceMappingURL=853.2be725fa.chunk.js.map